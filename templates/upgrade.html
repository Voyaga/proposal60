<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Upgrade to Pro — Get The Job</title>
  <meta name="description" content="Unlimited professional proposals and PDF exports." />
  <link rel="icon" href="/static/favicon.ico">
  <link rel="stylesheet" href="/static/style2.css">
</head>

<body>
  <div class="wrap">

    <!-- ===== Upgrade ===== -->
    <h1>Upgrade to Pro</h1>
    <p class="subhead">
      Unlimited, client-ready proposals — without rewriting the same job again.
    </p>

    <div class="notice">
      <strong>Built for real work.</strong><br>
      If this saves you one job a month, it pays for itself.
    </div>

    <div class="panel" style="text-align:center; max-width:520px; margin:0 auto 32px;">
      <h2>Get The Job Pro</h2>

      <div style="font-size:2.6rem; font-weight:900; margin:12px 0;">
        $19 <span style="font-size:1rem; color:var(--muted);">/ month</span>
      </div>

      <p class="helper">Cancel anytime. No lock-in.</p>

      <form method="POST" action="/checkout"
            onsubmit="trackClientEvent('upgrade_checkout_click')">
        <button class="btn hero-cta" style="width:100%;">
          Upgrade to Pro
        </button>
      </form>

      <ul class="feature-list" style="text-align:left; max-width:360px; margin:0 auto 24px;">
        <li>Unlimited proposals</li>
        <li>PDF export</li>
        <li>Edit before sending</li>
        <li>Trade-appropriate wording</li>
        <li>Priority improvements</li>
        <li>Copy and paste into your preferred editor</li>
        <li>Pro subscriptions are limited to two devices.</li>
      </ul>

      <p class="fineprint">Secure checkout powered by Stripe</p>
    </div>

    <!-- ===== Restore Pro ===== -->
    <hr style="margin:48px 0; opacity:.25;">

    <h2>Already upgraded?</h2>
    <p class="helper">
      Restore Pro access using the email you paid with.
    </p>

    {% if restore_error %}
      <div class="notice">{{ restore_error }}</div>
    {% endif %}

    {% if restored %}
      <div class="notice">
        <strong>Pro access restored.</strong><br>
        You’re all set.
      </div>
    {% endif %}

    {% if verified_email %}
      <div class="notice">
        <strong>Email verified.</strong><br>
        One last step — click below to activate Pro on this device.
      </div>
    {% endif %}

    {% if not verified_email %}
      <!-- Request magic link -->
      <form method="POST" action="/request-magic-link" style="max-width:420px;">
        <label>Email used at checkout</label>
        <input type="email" name="email" required placeholder="you@example.com">
        <input type="hidden" name="purpose" value="restore_pro">
        <button class="btn secondary" style="margin-top:14px;">
          Email me a secure link
        </button>
        <p class="helper" style="margin-top:8px;">
          We’ll email you a secure link. No password required.
        </p>
      </form>
    {% else %}
      <!-- Final restore -->
      <form method="POST" action="/restore-pro" style="max-width:420px;">
        <input type="hidden" name="device_id" id="device_id">
        <button class="btn secondary" style="margin-top:14px;">
          Finish restoring Pro on this device
        </button>
        <p class="helper" style="margin-top:8px;">
          Pro subscriptions can be active on up to two devices.
        </p>
      </form>
    {% endif %}

    {% if is_pro %}
      <div class="billing-wrap">
        <form method="POST" action="/billing-portal" style="margin-top:24px;">
          <button class="btn secondary">
            Manage or cancel subscription
          </button>
        </form>
      </div>
    {% endif %}

    <div class="actions" style="justify-content:center; margin-top:40px;">
      <a class="btn secondary" href="/app">Back to editor</a>
    </div>

    <footer class="site-footer">
      © Get The Job ·
      <a href="/terms">Terms</a> ·
      <a href="/privacy">Privacy</a> ·
      <a href="/">Home</a>
    </footer>
  </div>

<script>
(function () {
  const KEY = "gtj_device_id";
  function getId() {
    let id = localStorage.getItem(KEY);
    if (!id) {
      id = crypto.randomUUID();
      localStorage.setItem(KEY, id);
    }
    return id;
  }
  const el = document.getElementById("device_id");
  if (el) el.value = getId();
})();
</script>

</body>
</html>
